{"version":3,"file":"write-queue.js","sourceRoot":"","sources":["../../../src/jobs/metadata-index/write-queue.ts"],"names":[],"mappings":"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"}